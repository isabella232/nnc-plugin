Object Detection (Yolo v2 format)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Yolo v2フォーマットで準備された物体検出データセットを、Neural Network ConsoleのデータセットCSVファイル形式、特に物体検出サンプルプロジェクト、synthetic_image_object_detectionで用いている形式にコンバートします。

Yolo v2フォーマットは、画像ファイルと同名かつ拡張子をtxtに変更したファイル名のテキストファイルを用意し、テキストファイルの各行に物体のIndex、中心X座標、中心Y座標、幅、高さを入力します。物体のIndexは0から始まる整数で、座標及び縦横のサイズは画像の左上を(0.0, 0.0)、画像の右下を(1.0,1.0)として指定します。

image.png

image.txt



.. list-table::
   :widths: 100

   * -
        1 0.9764947367828946 0.6157956367918462 0.3083005211565641 0.16941592385576362
        
        0 0.5255774544381083 0.7251694243924344 0.1763326673913164 0.13065036222690296
        
        3 0.8369506590907345 0.9836015569071715 0.2502855465179791 0.19769644444902154
        
        2 0.48402106995254446 0.5825400718280271 0.32631333545360164 0.23807745759339757
        
        …




.. list-table::
   :widths: 30 70
   :class: longtable

   * - input-dir
     - Yolo v2フォーマットの変換元データセットを構成する画像とテキストファイルの含まれるフォルダを指定します

   * - output-dir
     - コンバート後のデータセットCSVファイルおよび、そこに含まれるデータファイルの出力フォルダを指定します

   * - num-class
     - 変換元データセットに含まれる検出対象の物体の総数（テキストファイルに含まれる物体Indexの最大値+1）を指定します

   * - channel
     - コンバート後のデータセットの画像チャンネル数を1（モノクロ）もしくは3（RGB）で指定します

   * - width
     - コンバート後のデータセットの画像の幅をピクセル単位で指定します

   * - height
     - コンバート後のデータセットの画像の高さをピクセル単位で指定します

   * - anchor
     - アンカーの数（物体検出を行う基礎となる縦横比、サイズのバリエーション数）を指定します

   * - grid-size
     -
        width, heightで指定した画像を構成するグリッドのサイズをピクセル単位で指定します
        
        width, heightはgrid-sizeで割り切れる必要があります

   * - mode
     -
        変換元データセットに含まれる画像のアスペクト比がwidth, heightで指定するサイズのアスペクト比と異なる場合、アスペクト比を合わせる方法を指定します


        
        trimming：画像の端を切り取ることでアスペクト比を合わせます
        
        padding：画像の端に0を挿入することでアスペクト比を合わせます
        
        resize：アスペクト比を無視し、画像を指定サイズにリサイズします

   * - shuffle
     -
        コンバート後のデータセットCSVファイルの各行のシャッフルを実施するかどうかを指定します
        
        true : ランダムにシャッフルを行います
        
        false : シャッフルを行いません

   * -
        output_file1
        
        output_file2
     - コンバート後のデータセットCSVファイル1,2のファイル名を指定します

   * -
        ratio1
        
        ratio2
     -
        コンバート後のデータセットCSVファイル1,2に用いるデータの割合を指定します
        
        ratio1, ratio2の割合の合計は100 (%)である必要があります
        
**ご参考**

本プラグインを用いて、かつgrid-sizeに16を指定して作成した物体検出用データセットは、synthetic_image_object_detectionサンプルプロジェクトを用い、Training、Validation、Runtime各ネットワークの各Argumentレイヤー、NumClassのValueプロパティをnum-classで指定した値に、NumAnchorのValueプロパティをanchorで指定した値に、InputChのValueプロパティをchannelで指定した値に、Width、HeightのValueプロパティをそれぞれwidth, heightで指定した値に設定することでひとまず学習を試行することができます。

